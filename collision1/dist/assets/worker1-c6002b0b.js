(function(){"use strict";const d=Array.from(Array.from({length:360},(t,n)=>n)).map(t=>t/180*Math.PI),p=d.map(t=>Math.sin(t)),y=d.map(t=>Math.cos(t));let u=null,h=new Map,M=500,X=700,e=200;const m="none",L="x-axis",Y="y-axis";onmessage=({data:t})=>{N(t);const n=I(t.circleList);postMessage(n)};function N(t){M=t.height,X=t.width,e=t.gridValue}function I(t){const n=t.map(o=>{const i=k(o),s=E(i,o);return s==="x-axis"?P(o):s==="y-axis"&&S(o),C(o),w(o),o});return _(),n}function _(){h.clear(),u&&(h=u,u=null)}function w(t){u===null&&(u=new Map);const n=(t.x-t.r)/e|0,o=(t.x+t.r)/e|0,i=(t.y-t.r)/e|0,s=(t.y+t.r)/e|0;for(let f=n;f<=o;f++)for(let g=i;g<=s;g++){const r=`${f}-${g}`;u.has(r)?u.get(r).push(t):u.set(r,[t])}}function C(t){const n=t.x+t.v*p[t.ang],o=t.y+t.v*y[t.ang];return Object.assign(t,{x:n,y:o})}function k({ang:t,x:n,y:o,v:i,r:s}){const f=n+i*p[t],g=o+i*y[t];return{leftX:f-s,rightX:f+s,lowY:g-s,highY:g+s}}function E({leftX:t,rightX:n,lowY:o,highY:i},s){if(t<=0||n>=X)return Y;if(o<=0||i>=M)return L;const f=t/e|0,g=n/e|0,r=o/e|0,b=i/e|0;for(let A=f;A<=g;A++)for(let R=r;R<=b;R++){const a=h.get(`${A}-${R}`);if(a){for(let x=0;x<a.length;x++)if(!G(a[x],s)&&$(a[x],s))return Y}}return m}function G(t,n){return t.x===n.x&&t.y===n.y&&t.r===n.r}function P(t){t.ang=Math.abs(180-t.ang)}function S(t){t.ang=Math.abs(360-t.ang)}function $(t,n){return(t.x-n.x)**2+(t.y-n.y)**2<=(t.r+n.r)**2}})();
